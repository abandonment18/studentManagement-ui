"use strict";(self["webpackChunkStudentManagement"]=self["webpackChunkStudentManagement"]||[]).push([[883],{5883:function(e,r,s){s.r(r),s.d(r,{default:function(){return g}});var a=s(6252);const t=e=>((0,a.dD)("data-v-f4240dbc"),e=e(),(0,a.Cn)(),e),o={class:"crumbs"},l={class:"box"},d={class:"left"},m=t((()=>(0,a._)("h1",{style:{margin:"0 0 20px 0"}},"修改密码",-1)));function u(e,r,s,t,u,n){const p=(0,a.up)("el-breadcrumb-item"),i=(0,a.up)("el-breadcrumb"),f=(0,a.up)("el-input"),c=(0,a.up)("el-form-item"),w=(0,a.up)("el-button"),h=(0,a.up)("el-form");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",o,[(0,a.Wm)(i,{separator:"/"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{to:{path:"/admin/home"}},{default:(0,a.w5)((()=>[(0,a.Uk)("首页")])),_:1}),(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Uk)("设置")])),_:1}),(0,a.Wm)(p,{to:{path:"/admin/updatePassword"}},{default:(0,a.w5)((()=>[(0,a.Uk)("修改密码")])),_:1})])),_:1})]),(0,a._)("div",l,[(0,a._)("div",d,[m,(0,a.Wm)(h,{model:u.form,ref:"form",rules:u.rules,"status-icon":"",class:"demo-form","label-position":"left","label-width":"120px","require-asterisk-position":"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{label:"用户名",prop:"username"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{modelValue:u.form.username,"onUpdate:modelValue":r[0]||(r[0]=e=>u.form.username=e),readonly:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"原密码",prop:"oldPassword"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{modelValue:u.form.oldPassword,"onUpdate:modelValue":r[1]||(r[1]=e=>u.form.oldPassword=e),type:"password",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"新密码",prop:"password"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{modelValue:u.form.password,"onUpdate:modelValue":r[2]||(r[2]=e=>u.form.password=e),type:"password",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"再次输入密码",prop:"repeatPassword"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{modelValue:u.form.repeatPassword,"onUpdate:modelValue":r[3]||(r[3]=e=>u.form.repeatPassword=e),type:"password",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w,{type:"primary",onClick:r[4]||(r[4]=e=>n.handUpdateForm()),style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Uk)("修改")])),_:1})])),_:1})])),_:1},8,["model","rules"])])])],64)}s(7658);var n=s(7068);function p(e){return(0,n.Z)({method:"post",url:"/admin/updatePassword",data:e})}var i=s(562),f=s(3695),c={name:"registerStudent",data(){return{form:{username:""},rules:{oldPassword:{required:!0,message:"请输入原密码",trigger:"blur",pattern:/^([0-9])+$/},password:{required:!0,message:"请输入新密码",trigger:"blur"},repeatPassword:{required:!0,message:"请再次输入新密码",trigger:"blur"}}}},mounted(){(0,i.O)().then((e=>{this.form.username=e.data.userName}))},methods:{handUpdateForm(){this.$refs["form"].validate((e=>{if(e)if(this.form.password===this.form.repeatPassword){const e=this.form;p(e).then((e=>{200===e.code?(this.$message({type:"success",message:"修改成功，请重新登录"}),(0,f.gy)(f.LP),this.$router.push("/"),this.form={},void 0!=this.$refs["form"]&&this.$refs["form"].resetFields()):300===e.code?this.$message({type:"error",message:e.msg}):401===e.code?((0,n.y)(e.code),(0,f.gy)(f.LP),this.$router.push("/"),this.$message({type:"error",message:"请重新登录"})):(0,n.y)(e.code)})).catch((()=>{}))}else this.$message({type:"error",message:"两次密码不同"});else this.$message({type:"error",message:"验证失败，请检查后重新提交"});return!1}))}}},w=s(3744);const h=(0,w.Z)(c,[["render",u],["__scopeId","data-v-f4240dbc"]]);var g=h}}]);
//# sourceMappingURL=883.d6990587.js.map