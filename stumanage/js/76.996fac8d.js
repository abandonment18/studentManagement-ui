"use strict";(self["webpackChunkStudentManagement"]=self["webpackChunkStudentManagement"]||[]).push([[76],{1076:function(e,a,l){l.r(a),l.d(a,{default:function(){return W}});var t=l(6252);const r=e=>((0,t.dD)("data-v-d4cc52ca"),e=e(),(0,t.Cn)(),e),o={class:"crumbs"},s={class:"box"},i=r((()=>(0,t._)("div",{class:"up"},[(0,t._)("h1",{class:"title"},"所有用户信息")],-1))),d={class:"dialog-footer"},u={class:"pageInfo",style:{margin:"40px 0"}};function m(e,a,l,r,m,n){const p=(0,t.up)("el-breadcrumb-item"),h=(0,t.up)("el-breadcrumb"),g=(0,t.up)("el-table-column"),c=(0,t.up)("el-button"),f=(0,t.up)("el-table"),b=(0,t.up)("el-input"),w=(0,t.up)("el-form-item"),W=(0,t.up)("el-radio"),y=(0,t.up)("el-radio-group"),k=(0,t.up)("el-form"),_=(0,t.up)("el-dialog"),C=(0,t.up)("el-pagination");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",o,[(0,t.Wm)(h,{separator:"/"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{to:{path:"/admin/home"}},{default:(0,t.w5)((()=>[(0,t.Uk)("首页")])),_:1}),(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Uk)("设置")])),_:1}),(0,t.Wm)(p,{to:{path:"/admin/allUser"}},{default:(0,t.w5)((()=>[(0,t.Uk)("所有用户")])),_:1})])),_:1})]),(0,t._)("div",s,[i,(0,t.Wm)(f,{data:m.tableData,stripe:"",style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{prop:"id",type:"index",label:"ID",width:"120"}),(0,t.Wm)(g,{prop:"userType",label:"用户权限(0:教师,1:学生)",width:"auto",sortable:""}),(0,t.Wm)(g,{prop:"nickName",label:"昵称",width:"auto"}),(0,t.Wm)(g,{prop:"username",label:"用户名",width:"auto"}),(0,t.Wm)(g,{prop:"sex",label:"性别",width:"auto"}),(0,t.Wm)(g,{prop:"email",label:"邮箱",width:"auto"}),(0,t.Wm)(g,{prop:"phoneNumber",label:"电话",width:"auto"}),(0,t.Wm)(g,{fixed:"right",label:"Operations",width:"120"},{default:(0,t.w5)((e=>[(0,t.Wm)(c,{link:"",type:"danger",size:"small",onClick:a=>n.handDelete(e.row.id)},{default:(0,t.w5)((()=>[(0,t.Uk)("删除")])),_:2},1032,["onClick"]),(0,t.Wm)(c,{link:"",type:"primary",size:"small",onClick:a=>n.handUpdate(e.row)},{default:(0,t.w5)((()=>[(0,t.Uk)("修改")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,t.Wm)(_,{title:"修改",modelValue:m.dialogVisible,"onUpdate:modelValue":a[5]||(a[5]=e=>m.dialogVisible=e),width:"30%"},{footer:(0,t.w5)((()=>[(0,t._)("span",d,[(0,t.Wm)(c,{onClick:a[4]||(a[4]=e=>m.dialogVisible=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(c,{type:"primary",onClick:n.save},{default:(0,t.w5)((()=>[(0,t.Uk)("确定")])),_:1},8,["onClick"])])])),default:(0,t.w5)((()=>[(0,t.Wm)(k,{model:m.form,"label-width":"120px",rules:m.rules,ref:"form"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{label:"昵称",prop:"nickName"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{modelValue:m.form.nickName,"onUpdate:modelValue":a[0]||(a[0]=e=>m.form.nickName=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(w,{label:"性别",prop:"gender"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{modelValue:m.form.gender,"onUpdate:modelValue":a[1]||(a[1]=e=>m.form.gender=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{label:"男"}),(0,t.Wm)(W,{label:"女"})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(w,{label:"邮箱",prop:"email"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{modelValue:m.form.email,"onUpdate:modelValue":a[2]||(a[2]=e=>m.form.email=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(w,{label:"电话",prop:"phoneNumber"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{modelValue:m.form.phoneNumber,"onUpdate:modelValue":a[3]||(a[3]=e=>m.form.phoneNumber=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),(0,t._)("div",u,[(0,t.Wm)(C,{onSizeChange:n.handlePageSizeChange,onCurrentChange:n.handleCurrentChange,"current-page":m.currentPage,"page-sizes":[5,10,15],"page-size":m.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:m.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])],64)}l(7658);var n=l(7068);function p(e,a){return(0,n.Z)({method:"get",url:"/admin/user",params:{pageNum:e,pageSize:a}})}function h(e){return(0,n.Z)({method:"post",url:"/admin/deleteUserById",params:{id:e}})}function g(e){return(0,n.Z)({method:"post",url:"/admin/updateUser",data:e})}var c=l(3695),f={name:"courses",data(){return{currentPage:1,pageSize:10,total:10,tableData:[],dialogVisible:!1,form:{},rules:{nickName:{required:!0,message:"请输入昵称",trigger:"blur"},gender:{required:!0,message:"请输入性别",trigger:"blur"},email:{required:!1,trigger:"blur",message:"请输入邮箱",pattern:/^([1-9])?([0-9])+@([a-zA-Z0-9]+).([a-zA-Z])+$/},phoneNumber:{required:!0,trigger:"blur",message:"请输入电话",pattern:/^([1-9])?([0-9]){11}$/}}}},mounted(){this.selectAll()},methods:{selectAll(){const e=(0,c.LP)();if(null!==e){const e=this.currentPage,a=this.pageSize;p(e,a).then((e=>{200===e.code?(this.tableData=e.data.list,this.total=e.data.total):401===e.code?((0,n.y)(e.code),(0,c.gy)(c.LP),this.$router.push("/"),this.$message({type:"error",message:"请重新登录"})):(0,n.y)(e.code)}))}else(0,c.gy)(c.LP),this.$router.push("/"),this.$message({type:"error",message:"请登录"})},handleCurrentChange(e){this.currentPage=e,this.selectAll()},handlePageSizeChange(e){this.pageSize=e,this.selectAll()},handDelete(e){h(e).then((e=>{200==e.code?(this.selectAll(),this.$message({type:"success",message:"删除成功"})):401===e.code?((0,n.y)(e.code),(0,c.gy)(c.LP),this.$router.push("/"),this.$message({type:"error",message:"请重新登录"})):(0,n.y)(e.code)}))},handUpdate(e){this.dialogVisible=!0,this.form=e,this.form.gender=e.sex,void 0!=this.$refs["form"]&&this.$refs["form"].resetFields()},save(){this.form.id&&(g(this.form).then((e=>{200==e.code&&(this.selectAll(),this.dialogVisible=!1,this.$message({type:"success",message:"删除成功"}))})),console.log(this.form))}}},b=l(3744);const w=(0,b.Z)(f,[["render",m],["__scopeId","data-v-d4cc52ca"]]);var W=w}}]);
//# sourceMappingURL=76.996fac8d.js.map