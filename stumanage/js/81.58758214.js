"use strict";(self["webpackChunkStudentManagement"]=self["webpackChunkStudentManagement"]||[]).push([[81],{9562:function(e,t,a){a.d(t,{QE:function(){return r},Rk:function(){return d},b0:function(){return l},bx:function(){return o},ed:function(){return n},hM:function(){return u}});var s=a(7068);function r(e,t){return(0,s.Z)({method:"get",url:"/admin/students",params:{pageNum:e,pageSize:t}})}function o(e){return(0,s.Z)({method:"post",url:"/admin/searchByStudentsId",params:{studentsId:e}})}function l(e){return(0,s.Z)({method:"post",url:"/admin/searchStudentsByName",params:{name:e}})}function u(e){return(0,s.Z)({method:"post",url:"/admin/deleteStudentsById",params:{id:e}})}function d(e){return(0,s.Z)({method:"post",url:"/admin/insertStudents",data:e})}function n(e){return(0,s.Z)({method:"post",url:"/admin/updateStudents",data:e})}},6407:function(e,t,a){a.d(t,{E2:function(){return u},Fr:function(){return d},OU:function(){return o},S9:function(){return l},lX:function(){return r},vq:function(){return n}});var s=a(7068);function r(e,t){return(0,s.Z)({method:"get",url:"/admin/courses",params:{pageNum:e,pageSize:t}})}function o(){return(0,s.Z)({method:"get",url:"/admin/selectAllCoursesInfoList"})}function l(e){return(0,s.Z)({method:"post",url:"/admin/searchByCoursesId",params:{CoursesId:e}})}function u(e){return(0,s.Z)({method:"post",url:"/admin/deleteCoursesById",params:{id:e}})}function d(e){return(0,s.Z)({method:"post",url:"/admin/insertCourses",data:e})}function n(e){return(0,s.Z)({method:"post",url:"/admin/updateCourses",data:e})}},6081:function(e,t,a){a.r(t),a.d(t,{default:function(){return z}});var s=a(6252);const r=e=>((0,s.dD)("data-v-5c368e78"),e=e(),(0,s.Cn)(),e),o={class:"crumbs"},l={class:"box"},u={key:0,class:"teacher"},d={class:"up"},n=r((()=>(0,s._)("h1",{class:"title"},"所有学生选课信息",-1))),i={class:"dialog-footer"},m={key:1,class:"student"},h={class:"up"},c=r((()=>(0,s._)("h1",{class:"title"},"学生选课信息",-1))),p={class:"dialog-footer"},g={class:"pageInfo",style:{margin:"40px 0"}};function f(e,t,a,r,f,y){const C=(0,s.up)("el-breadcrumb-item"),w=(0,s.up)("el-breadcrumb"),b=(0,s.up)("el-input"),S=(0,s.up)("el-button"),I=(0,s.up)("el-table-column"),V=(0,s.up)("el-table"),W=(0,s.up)("el-form-item"),N=(0,s.up)("el-option"),D=(0,s.up)("el-select"),k=(0,s.up)("el-form"),_=(0,s.up)("el-dialog"),$=(0,s.up)("el-pagination");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",o,[(0,s.Wm)(w,{separator:"/"},{default:(0,s.w5)((()=>[(0,s.Wm)(C,{to:{path:"/admin/home"}},{default:(0,s.w5)((()=>[(0,s.Uk)("首页")])),_:1}),(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[(0,s.Uk)("学生信息")])),_:1}),(0,s.Wm)(C,{to:{path:"/admin/studentcourses"}},{default:(0,s.w5)((()=>[(0,s.Uk)("学生选课")])),_:1})])),_:1})]),(0,s._)("div",l,["0"===f.userType?((0,s.wg)(),(0,s.iD)("div",u,[(0,s._)("div",d,[n,(0,s.Wm)(b,{modelValue:f.searchStudentCourseStudentId,"onUpdate:modelValue":t[0]||(t[0]=e=>f.searchStudentCourseStudentId=e),placeholder:"请输入学生编号",clearable:"",size:"large",style:{width:"450px",margin:"0 20px 10px 0"}},null,8,["modelValue"]),(0,s.Wm)(S,{type:"primary",onClick:y.handSearchByStudentId,style:{margin:"0 155px 0 0"}},{default:(0,s.w5)((()=>[(0,s.Uk)("搜索")])),_:1},8,["onClick"]),(0,s.Wm)(b,{modelValue:f.searchStudentCourseCourseName,"onUpdate:modelValue":t[1]||(t[1]=e=>f.searchStudentCourseCourseName=e),placeholder:"请输入课程名称",clearable:"",size:"large",style:{width:"450px",margin:"0 20px 10px 0"}},null,8,["modelValue"]),(0,s.Wm)(S,{type:"primary",onClick:y.handSearchByByCourseName,style:{margin:"0 7px 0 0"}},{default:(0,s.w5)((()=>[(0,s.Uk)("搜索")])),_:1},8,["onClick"]),(0,s.Wm)(b,{modelValue:f.searchStudentCourseStudentName,"onUpdate:modelValue":t[2]||(t[2]=e=>f.searchStudentCourseStudentName=e),placeholder:"请输入学生姓名",clearable:"",size:"large",style:{width:"450px",margin:"0 20px 0 0"}},null,8,["modelValue"]),(0,s.Wm)(S,{type:"primary",onClick:y.handSearchByByTeacherName},{default:(0,s.w5)((()=>[(0,s.Uk)("搜索")])),_:1},8,["onClick"]),(0,s.Wm)(S,{type:"primary",onClick:y.handReset},{default:(0,s.w5)((()=>[(0,s.Uk)("重置")])),_:1},8,["onClick"]),(0,s.Wm)(S,{type:"primary",onClick:y.handAdd},{default:(0,s.w5)((()=>[(0,s.Uk)("新增")])),_:1},8,["onClick"])]),(0,s.Wm)(V,{data:f.tableData,stripe:"",style:{width:"100%"}},{default:(0,s.w5)((()=>[(0,s.Wm)(I,{prop:"id",type:"index",label:"ID",width:"120"}),(0,s.Wm)(I,{prop:"studentID",label:"学生编号",width:"auto",sortable:""}),(0,s.Wm)(I,{prop:"studentName",label:"学生名称",width:"auto"}),(0,s.Wm)(I,{prop:"courseID",label:"课程编号",width:"auto"}),(0,s.Wm)(I,{prop:"courseName",label:"课程名称",width:"auto"}),(0,s.Wm)(I,{prop:"courseGrade",label:"课程成绩",width:"auto"}),(0,s.Wm)(I,{fixed:"right",label:"Operations",width:"120"},{default:(0,s.w5)((e=>[(0,s.Wm)(S,{link:"",type:"danger",size:"small",onClick:t=>y.handDelete(e.row.id)},{default:(0,s.w5)((()=>[(0,s.Uk)("删除")])),_:2},1032,["onClick"]),(0,s.Wm)(S,{link:"",type:"primary",size:"small",onClick:t=>y.handUpdate(e.row)},{default:(0,s.w5)((()=>[(0,s.Uk)("修改")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,s.Wm)(_,{title:"修改或新增",modelValue:f.dialogVisible,"onUpdate:modelValue":t[9]||(t[9]=e=>f.dialogVisible=e),width:"30%",onOpen:y.openMethods},{footer:(0,s.w5)((()=>[(0,s._)("span",i,[(0,s.Wm)(S,{onClick:t[8]||(t[8]=e=>f.dialogVisible=!1)},{default:(0,s.w5)((()=>[(0,s.Uk)("取消")])),_:1}),(0,s.Wm)(S,{type:"primary",onClick:y.save},{default:(0,s.w5)((()=>[(0,s.Uk)("确定")])),_:1},8,["onClick"])])])),default:(0,s.w5)((()=>[(0,s.Wm)(k,{model:f.form,"label-width":"120px",rules:f.rules,ref:"form"},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{label:"学生编号",prop:"studentID",onInput:y.handleStudentIdInput},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{modelValue:f.form.studentID,"onUpdate:modelValue":t[3]||(t[3]=e=>f.form.studentID=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1},8,["onInput"]),(0,s.Wm)(W,{label:"学生名称",prop:"studentName"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{modelValue:f.form.studentName,"onUpdate:modelValue":t[4]||(t[4]=e=>f.form.studentName=e),style:{width:"80%"},readonly:""},null,8,["modelValue"])])),_:1}),(0,s.Wm)(W,{label:"课程名称",prop:"courseName"},{default:(0,s.w5)((()=>[(0,s.Wm)(D,{modelValue:f.form.courseName,"onUpdate:modelValue":t[5]||(t[5]=e=>f.form.courseName=e),style:{width:"80%"},placeholder:"课程名称",onChange:y.handleCourseChange},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(f.allCoursesList,(e=>((0,s.wg)(),(0,s.j4)(N,{label:e.courseName,value:e.courseID},null,8,["label","value"])))),256))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,s.Wm)(W,{label:"课程编号",prop:"courseID"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{modelValue:f.form.courseID,"onUpdate:modelValue":t[6]||(t[6]=e=>f.form.courseID=e),style:{width:"80%"},readonly:""},null,8,["modelValue"])])),_:1}),(0,s.Wm)(W,{label:"课程成绩",prop:"courseGrade"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{modelValue:f.form.courseGrade,"onUpdate:modelValue":t[7]||(t[7]=e=>f.form.courseGrade=e),style:{width:"80%"},id:"courseGrade"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","onOpen"])])):((0,s.wg)(),(0,s.iD)("div",m,[(0,s._)("div",h,[c,(0,s.Wm)(S,{type:"primary",onClick:y.handAdd},{default:(0,s.w5)((()=>[(0,s.Uk)("新增选课")])),_:1},8,["onClick"])]),(0,s.Wm)(V,{data:f.tableData,stripe:"",style:{width:"100%"}},{default:(0,s.w5)((()=>[(0,s.Wm)(I,{prop:"id",type:"index",label:"ID",width:"120"}),(0,s.Wm)(I,{prop:"studentID",label:"学生编号",width:"auto",sortable:""}),(0,s.Wm)(I,{prop:"studentName",label:"学生名称",width:"auto"}),(0,s.Wm)(I,{prop:"courseID",label:"课程编号",width:"auto"}),(0,s.Wm)(I,{prop:"courseName",label:"课程名称",width:"auto"}),(0,s.Wm)(I,{prop:"courseGrade",label:"课程成绩",width:"auto"})])),_:1},8,["data"]),(0,s.Wm)(_,{title:"新增",modelValue:f.dialogVisible,"onUpdate:modelValue":t[16]||(t[16]=e=>f.dialogVisible=e),width:"30%",onOpen:y.openMethods},{footer:(0,s.w5)((()=>[(0,s._)("span",p,[(0,s.Wm)(S,{onClick:t[15]||(t[15]=e=>f.dialogVisible=!1)},{default:(0,s.w5)((()=>[(0,s.Uk)("取消")])),_:1}),(0,s.Wm)(S,{type:"primary",onClick:y.save},{default:(0,s.w5)((()=>[(0,s.Uk)("确定")])),_:1},8,["onClick"])])])),default:(0,s.w5)((()=>[(0,s.Wm)(k,{model:f.form,"label-width":"120px",rules:f.rules,ref:"form"},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{label:"学生编号",prop:"studentID"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{modelValue:f.form.studentID,"onUpdate:modelValue":t[10]||(t[10]=e=>f.form.studentID=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1}),(0,s.Wm)(W,{label:"学生名称",prop:"studentName"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{modelValue:f.form.studentName,"onUpdate:modelValue":t[11]||(t[11]=e=>f.form.studentName=e),style:{width:"80%"},readonly:""},null,8,["modelValue"])])),_:1}),(0,s.Wm)(W,{label:"课程名称",prop:"courseName"},{default:(0,s.w5)((()=>[(0,s.Wm)(D,{modelValue:f.form.courseName,"onUpdate:modelValue":t[12]||(t[12]=e=>f.form.courseName=e),style:{width:"80%"},placeholder:"课程名称",onChange:y.handleCourseChange},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(f.allCoursesList,(e=>((0,s.wg)(),(0,s.j4)(N,{label:e.courseName,value:e.courseID},null,8,["label","value"])))),256))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,s.Wm)(W,{label:"课程编号",prop:"courseID"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{modelValue:f.form.courseID,"onUpdate:modelValue":t[13]||(t[13]=e=>f.form.courseID=e),style:{width:"80%"},readonly:""},null,8,["modelValue"])])),_:1}),(0,s.Wm)(W,{label:"课程成绩",prop:"courseGrade"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{modelValue:f.form.courseGrade,"onUpdate:modelValue":t[14]||(t[14]=e=>f.form.courseGrade=e),style:{width:"80%"},id:"courseGrade"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","onOpen"])])),(0,s._)("div",g,[(0,s.Wm)($,{onSizeChange:y.handlePageSizeChange,onCurrentChange:y.handleCurrentChange,"current-page":f.currentPage,"page-sizes":[5,10,15],"page-size":f.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:f.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])],64)}a(7658);var y=a(7068);function C(e,t){return(0,y.Z)({method:"get",url:"/admin/studentCourse",params:{pageNum:e,pageSize:t}})}function w(e){return(0,y.Z)({method:"post",url:"/admin/searchStudentCourseByStudentId",params:{studentId:e}})}function b(e){return(0,y.Z)({method:"post",url:"/admin/searchStudentCourseByCourseName",params:{name:e}})}function S(e){return(0,y.Z)({method:"post",url:"/admin/searchStudentCourseByStudentName",params:{name:e}})}function I(e){return(0,y.Z)({method:"post",url:"/admin/deleteStudentCourseById",params:{id:e}})}function V(e){return(0,y.Z)({method:"post",url:"/admin/insertStudentCourse",data:e})}function W(e){return(0,y.Z)({method:"post",url:"/admin/updateStudentCourse",data:e})}function N(e,t,a){return(0,y.Z)({method:"get",url:"/admin/selectStudentCourseInfoByStudentId",params:{pageNum:e,pageSize:t,id:a}})}var D=a(6407),k=a(9562),_=a(562),$=a(3695),U={name:"courses",data(){return{currentPage:1,pageSize:10,total:10,tableData:[],userType:"",searchStudentCourseStudentId:"",searchStudentCourseStudentName:"",searchStudentCourseCourseName:"",dialogVisible:!1,form:{},allCoursesList:[],rules:{studentID:{required:!0,message:"请输入学生编号数",trigger:"blur",pattern:/^([0-9])+$/},studentName:{required:!0,message:"请输入学生名称",trigger:"blur"},courseID:{required:!0,message:"请输入课程编号",trigger:"blur",pattern:/^([0-9])+$/},courseName:{required:!0,message:"请输入课程名称",trigger:"blur"}}}},mounted(){this.userType=this.$store.state.user.userType,this.selectAll(),this.selectAllCourses()},methods:{handleStudentIdInput(){""!==this.form.studentID&&null!==this.form.studentID?(0,k.bx)(this.form.studentID).then((e=>{0!==e.data.length?this.form.studentName=e.data[0].name:this.form.studentName=""})):this.form.studentName=""},handleCourseChange(e){this.form.courseID=e},selectAllCourses(){(0,D.OU)().then((e=>{e.data.forEach((e=>{this.allCoursesList.push({courseName:e.courseName,courseID:e.courseID})}))}))},openMethods(){(0,_.O)().then((e=>{1==e.data.userType&&(document.getElementById("courseGrade").setAttribute("readonly","false"),document.getElementById("courseGrade").setAttribute("placeholder","学生暂无权限"))}))},selectAll(){const e=(0,$.LP)();if(null!==e){const e=this.currentPage,t=this.pageSize;if("0"===this.userType)C(e,t).then((e=>{200===e.code?(this.tableData=e.data.list,this.total=e.data.total):401===e.code?((0,y.y)(e.code),(0,$.gy)($.LP),this.$router.push("/"),this.$message({type:"error",message:"请重新登录"})):(0,y.y)(e.code)}));else if("1"===this.userType){const a=this.$store.state.user.studentID;N(e,t,a).then((e=>{200===e.code?(this.tableData=e.data.list,this.total=e.data.total):401===e.code?((0,y.y)(e.code),(0,$.gy)($.LP),this.$router.push("/"),this.$message({type:"error",message:"请重新登录"})):(0,y.y)(e.code)}))}}else(0,$.gy)($.LP),this.$router.push("/"),this.$message({type:"error",message:"请登录"})},handleCurrentChange(e){this.currentPage=e,this.selectAll()},handlePageSizeChange(e){this.pageSize=e,this.selectAll()},handSearchByStudentId(){const e=this.searchStudentCourseStudentId;if(!e)return!1;w(e).then((e=>{200==e.code?this.tableData=e.data:401===e.code?((0,y.y)(e.code),(0,$.gy)($.LP),this.$router.push("/"),this.$message({type:"error",message:"请重新登录"})):(0,y.y)(e.code)}))},handSearchByByTeacherName(){const e=this.searchStudentCourseStudentName;if(!e)return!1;S(e).then((e=>{200==e.code?this.tableData=e.data:401===e.code?((0,y.y)(e.code),(0,$.gy)($.LP),this.$router.push("/"),this.$message({type:"error",message:"请重新登录"})):(0,y.y)(e.code)}))},handSearchByByCourseName(){const e=this.searchStudentCourseCourseName;if(!e)return!1;b(e).then((e=>{200==e.code?this.tableData=e.data:401===e.code?((0,y.y)(e.code),(0,$.gy)($.LP),this.$router.push("/"),this.$message({type:"error",message:"请重新登录"})):(0,y.y)(e.code)}))},handReset(){this.selectAll(),this.searchStudentCourseStudentId="",this.searchStudentCourseStudentName="",this.searchStudentCourseCourseName=""},handDelete(e){"0"===this.userType&&I(e).then((e=>{200==e.code?(this.selectAll(),this.$message({type:"success",message:"删除成功"})):401===e.code?((0,y.y)(e.code),(0,$.gy)($.LP),this.$router.push("/"),this.$message({type:"error",message:"请重新登录"})):(0,y.y)(e.code)}))},handAdd(){this.dialogVisible=!0,this.form={},"1"==this.userType&&(this.form.studentID=this.$store.state.user.studentID,this.handleStudentIdInput()),void 0!==this.$refs["form"]&&this.$refs["form"].resetFields()},save(){"0"===this.userType?this.form.id?this.$refs["form"].validate((e=>{if(e){const e=this.form;W(e).then((e=>{200==e.code?(this.$message({type:"success",message:"修改成功"}),this.selectAll(),this.dialogVisible=!1):300===e.code?this.$message({type:"error",message:e.msg}):401===e.code?((0,y.y)(e.code),(0,$.gy)($.LP),this.$router.push("/"),this.$message({type:"error",message:"请重新登录"})):403===e.code?((0,y.y)(e.code),this.dialogVisible=!1):(0,y.y)(e.code)})).catch((()=>{}))}else this.$message({type:"error",message:"验证失败，不提交"});return!1})):this.$refs["form"].validate((e=>(e?V(this.form).then((e=>{200==e.code?(this.$message({type:"success",message:"增加成功"}),this.selectAll(),this.dialogVisible=!1):300===e.code?this.$message({type:"error",message:e.msg}):401===e.code?((0,y.y)(e.code),(0,$.gy)($.LP),this.$router.push("/"),this.$message({type:"error",message:"请重新登录"})):403===e.code?((0,y.y)(e.code),this.dialogVisible=!1):(0,y.y)(e.code)})).catch((()=>{})):this.$message({type:"error",message:"验证失败，不提交"}),!1))):"1"===this.userType&&this.$refs["form"].validate((e=>(e?V(this.form).then((e=>{200==e.code?(this.$message({type:"success",message:"增加成功"}),this.selectAll(),this.dialogVisible=!1):300===e.code?this.$message({type:"error",message:e.msg}):401===e.code?((0,y.y)(e.code),(0,$.gy)($.LP),this.$router.push("/"),this.$message({type:"error",message:"请重新登录"})):403===e.code?((0,y.y)(e.code),this.dialogVisible=!1):(0,y.y)(e.code)})).catch((()=>{})):this.$message({type:"error",message:"验证失败，不提交"}),!1)))},handUpdate(e){this.form=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0,void 0!=this.$refs["form"]&&this.$refs["form"].resetFields()}}},v=a(3744);const B=(0,v.Z)(U,[["render",f],["__scopeId","data-v-5c368e78"]]);var z=B}}]);
//# sourceMappingURL=81.58758214.js.map