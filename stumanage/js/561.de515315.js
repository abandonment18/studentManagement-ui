"use strict";(self["webpackChunkStudentManagement"]=self["webpackChunkStudentManagement"]||[]).push([[561],{561:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});var s=a(6252);const l=e=>((0,s.dD)("data-v-16e5ea3d"),e=e(),(0,s.Cn)(),e),r={class:"crumbs"},i={class:"box"},o={class:"up"},d=l((()=>(0,s._)("h1",{class:"title"},"所有教师单位信息",-1))),n={class:"dialog-footer"},m={class:"pageInfo",style:{margin:"40px 0"}};function h(e,t,a,l,h,u){const c=(0,s.up)("el-breadcrumb-item"),p=(0,s.up)("el-breadcrumb"),g=(0,s.up)("el-input"),f=(0,s.up)("el-button"),y=(0,s.up)("el-table-column"),b=(0,s.up)("el-table"),w=(0,s.up)("el-form-item"),U=(0,s.up)("el-form"),k=(0,s.up)("el-dialog"),W=(0,s.up)("el-pagination");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",r,[(0,s.Wm)(p,{separator:"/"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{to:{path:"/admin/home"}},{default:(0,s.w5)((()=>[(0,s.Uk)("首页")])),_:1}),(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Uk)("教师信息")])),_:1}),(0,s.Wm)(c,{to:{path:"/admin/units"}},{default:(0,s.w5)((()=>[(0,s.Uk)("教师单位")])),_:1})])),_:1})]),(0,s._)("div",i,[(0,s._)("div",o,[d,(0,s.Wm)(g,{modelValue:h.searchUnitsTeacherId,"onUpdate:modelValue":t[0]||(t[0]=e=>h.searchUnitsTeacherId=e),placeholder:"请输入教师编号",clearable:"",size:"large",style:{width:"500px",margin:"0 20px 10px 0"}},null,8,["modelValue"]),(0,s.Wm)(f,{type:"primary",onClick:u.handSearchByTeacherId,style:{margin:"0 155px 0 0"}},{default:(0,s.w5)((()=>[(0,s.Uk)("搜索")])),_:1},8,["onClick"]),(0,s.Wm)(g,{modelValue:h.searchUnitsName,"onUpdate:modelValue":t[1]||(t[1]=e=>h.searchUnitsName=e),placeholder:"请输入教师姓名",clearable:"",size:"large",style:{width:"500px",margin:"0 20px 0 0"}},null,8,["modelValue"]),(0,s.Wm)(f,{type:"primary",onClick:u.handSearchByName},{default:(0,s.w5)((()=>[(0,s.Uk)("搜索")])),_:1},8,["onClick"]),(0,s.Wm)(f,{type:"primary",onClick:u.handReset},{default:(0,s.w5)((()=>[(0,s.Uk)("重置")])),_:1},8,["onClick"]),(0,s.Wm)(f,{type:"primary",onClick:u.handAdd},{default:(0,s.w5)((()=>[(0,s.Uk)("新增")])),_:1},8,["onClick"])]),(0,s.Wm)(b,{data:h.tableData,stripe:"",style:{width:"100%"}},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{prop:"id",type:"index",label:"ID",width:"120"}),(0,s.Wm)(y,{prop:"teacherID",label:"教师编号",width:"auto",sortable:""}),(0,s.Wm)(y,{prop:"teacherName",label:"教师名称",width:"auto"}),(0,s.Wm)(y,{prop:"phone",label:"电话",width:"auto"}),(0,s.Wm)(y,{prop:"unitName",label:"学院名称",width:"auto"}),(0,s.Wm)(y,{fixed:"right",label:"Operations",width:"120"},{default:(0,s.w5)((e=>[(0,s.Wm)(f,{link:"",type:"danger",size:"small",onClick:t=>u.handDelete(e.row.id)},{default:(0,s.w5)((()=>[(0,s.Uk)("删除")])),_:2},1032,["onClick"]),(0,s.Wm)(f,{link:"",type:"primary",size:"small",onClick:t=>u.handUpdate(e.row)},{default:(0,s.w5)((()=>[(0,s.Uk)("修改")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,s.Wm)(k,{title:"修改或新增",modelValue:h.dialogVisible,"onUpdate:modelValue":t[7]||(t[7]=e=>h.dialogVisible=e),width:"30%"},{footer:(0,s.w5)((()=>[(0,s._)("span",n,[(0,s.Wm)(f,{onClick:t[6]||(t[6]=e=>h.dialogVisible=!1)},{default:(0,s.w5)((()=>[(0,s.Uk)("取消")])),_:1}),(0,s.Wm)(f,{type:"primary",onClick:u.save},{default:(0,s.w5)((()=>[(0,s.Uk)("确定")])),_:1},8,["onClick"])])])),default:(0,s.w5)((()=>[(0,s.Wm)(U,{model:h.form,"label-width":"120px",rules:h.rules,ref:"form"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{label:"教师编号",prop:"teacherID"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{modelValue:h.form.teacherID,"onUpdate:modelValue":t[2]||(t[2]=e=>h.form.teacherID=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1}),(0,s.Wm)(w,{label:"教师名称",prop:"teacherName"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{modelValue:h.form.teacherName,"onUpdate:modelValue":t[3]||(t[3]=e=>h.form.teacherName=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1}),(0,s.Wm)(w,{label:"电话",prop:"phone"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{modelValue:h.form.phone,"onUpdate:modelValue":t[4]||(t[4]=e=>h.form.phone=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1}),(0,s.Wm)(w,{label:"学院名称",prop:"unitName"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{modelValue:h.form.unitName,"onUpdate:modelValue":t[5]||(t[5]=e=>h.form.unitName=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),(0,s._)("div",m,[(0,s.Wm)(W,{onSizeChange:u.handlePageSizeChange,onCurrentChange:u.handleCurrentChange,"current-page":h.currentPage,"page-sizes":[5,10,15],"page-size":h.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:h.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])],64)}a(7658);var u=a(7068);function c(e,t){return(0,u.Z)({method:"get",url:"/admin/units",params:{pageNum:e,pageSize:t}})}function p(e){return(0,u.Z)({method:"post",url:"/admin/searchUnitsByTeacherId",params:{teachersId:e}})}function g(e){return(0,u.Z)({method:"post",url:"/admin/searchUnitsByName",params:{name:e}})}function f(e){return(0,u.Z)({method:"post",url:"/admin/deleteUnitsById",params:{id:e}})}function y(e){return(0,u.Z)({method:"post",url:"/admin/insertUnits",data:e})}function b(e){return(0,u.Z)({method:"post",url:"/admin/updateUnits",data:e})}var w=a(3695),U={name:"courses",data(){return{currentPage:1,pageSize:10,total:10,tableData:[],searchUnitsTeacherId:"",searchUnitsName:"",dialogVisible:!1,form:{},rules:{teacherID:{required:!0,message:"请输入教师编号数",trigger:"blur",pattern:/^([0-9])+$/},teacherName:{required:!0,message:"请输入教师名称",trigger:"blur"},phone:{required:!0,message:"请输入电话",trigger:"blur",pattern:/^([1-9])?([0-9]){11}$/},unitName:{required:!0,message:"请输入教师单位",trigger:"blur"}}}},mounted(){this.selectAll()},methods:{selectAll(){const e=(0,w.LP)();if(null!==e){const e=this.currentPage,t=this.pageSize;c(e,t).then((e=>{200===e.code?(this.tableData=e.data.list,this.total=e.data.total):401===e.code?((0,u.y)(e.code),(0,w.gy)(w.LP),this.$router.push("/"),this.$message({type:"error",message:"请重新登录"})):(0,u.y)(e.code)})).catch((()=>{}))}else(0,w.gy)(w.LP),this.$router.push("/"),this.$message({type:"error",message:"请登录"})},handleCurrentChange(e){this.currentPage=e,this.selectAll()},handlePageSizeChange(e){this.pageSize=e,this.selectAll()},handSearchByTeacherId(){const e=this.searchUnitsTeacherId;if(!e)return!1;p(e).then((e=>{200==e.code?this.tableData=e.data:401===e.code?((0,u.y)(e.code),(0,w.gy)(w.LP),this.$router.push("/"),this.$message({type:"error",message:"请重新登录"})):(0,u.y)(e.code)})).catch((()=>{}))},handSearchByName(){const e=this.searchUnitsName;if(!e)return!1;g(e).then((e=>{200==e.code?this.tableData=e.data:401===e.code?((0,u.y)(e.code),(0,w.gy)(w.LP),this.$router.push("/"),this.$message({type:"error",message:"请重新登录"})):(0,u.y)(e.code)})).catch((()=>{}))},handReset(){this.selectAll(),this.searchUnitsTeacherId="",this.searchUnitsName=""},handDelete(e){f(e).then((e=>{200==e.code?(this.selectAll(),this.$message({type:"success",message:"删除成功"})):401===e.code?((0,u.y)(e.code),(0,w.gy)(w.LP),this.$router.push("/"),this.$message({type:"error",message:"请重新登录"})):(0,u.y)(e.code)})).catch((()=>{}))},handAdd(){this.dialogVisible=!0,this.form={},void 0!==this.$refs["form"]&&this.$refs["form"].resetFields()},save(){this.form.id?this.$refs["form"].validate((e=>{if(e){const e=this.form;b(e).then((e=>{200==e.code?(this.$message({type:"success",message:"修改成功"}),this.selectAll(),this.dialogVisible=!1):300===e.code?this.$message({type:"error",message:e.msg}):401===e.code?((0,u.y)(e.code),(0,w.gy)(w.LP),this.$router.push("/"),this.$message({type:"error",message:"请重新登录"})):403===e.code?((0,u.y)(e.code),this.dialogVisible=!1):(0,u.y)(e.code)})).catch((()=>{}))}else this.$message({type:"error",message:"验证失败，不提交"});return!1})):this.$refs["form"].validate((e=>(e?y(this.form).then((e=>{200==e.code?(this.$message({type:"success",message:"增加成功"}),this.selectAll(),this.dialogVisible=!1):300===e.code?this.$message({type:"error",message:e.msg}):401===e.code?((0,u.y)(e.code),(0,w.gy)(w.LP),this.$router.push("/"),this.$message({type:"error",message:"请重新登录"})):403===e.code?((0,u.y)(e.code),this.dialogVisible=!1):(0,u.y)(e.code)})).catch((()=>{})):this.$message({type:"error",message:"验证失败，不提交"}),!1)))},handUpdate(e){this.form=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0,void 0!=this.$refs["form"]&&this.$refs["form"].resetFields()}}},k=a(3744);const W=(0,k.Z)(U,[["render",h],["__scopeId","data-v-16e5ea3d"]]);var V=W}}]);
//# sourceMappingURL=561.de515315.js.map