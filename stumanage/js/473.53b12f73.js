"use strict";(self["webpackChunkStudentManagement"]=self["webpackChunkStudentManagement"]||[]).push([[473],{6473:function(e,l,a){a.r(l),a.d(l,{default:function(){return V}});var t=a(6252);const r=e=>((0,t.dD)("data-v-2be39eae"),e=e(),(0,t.Cn)(),e),m={class:"crumbs"},o={class:"box"},d={class:"right"},u=r((()=>(0,t._)("h1",{style:{margin:"0 0 20px 0"}},"个人信息",-1))),n={class:"dialog-footer"};function s(e,l,a,r,s,i){const p=(0,t.up)("el-breadcrumb-item"),f=(0,t.up)("el-breadcrumb"),g=(0,t.up)("el-input"),h=(0,t.up)("el-form-item"),c=(0,t.up)("el-button"),V=(0,t.up)("el-form"),b=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",m,[(0,t.Wm)(f,{separator:"/"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{to:{path:"/admin/home"}},{default:(0,t.w5)((()=>[(0,t.Uk)("首页")])),_:1}),(0,t.Wm)(p,{to:{path:"/admin/personalinfo"}},{default:(0,t.w5)((()=>[(0,t.Uk)("个人资料")])),_:1})])),_:1})]),(0,t._)("div",o,[(0,t._)("div",d,[u,(0,t.Wm)(V,{model:s.form,"status-icon":"",class:"demo-form"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{label:"用户名",prop:"userName",width:"500px"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:s.form.userName,"onUpdate:modelValue":l[0]||(l[0]=e=>s.form.userName=e),readonly:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(h,{label:"昵称",prop:"nickName"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:s.form.nickName,"onUpdate:modelValue":l[1]||(l[1]=e=>s.form.nickName=e),readonly:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(h,{label:"邮箱",prop:"email"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:s.form.email,"onUpdate:modelValue":l[2]||(l[2]=e=>s.form.email=e),readonly:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(h,{label:"电话",prop:"phoneNumber"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:s.form.phoneNumber,"onUpdate:modelValue":l[3]||(l[3]=e=>s.form.phoneNumber=e),modelModifiers:{number:!0},readonly:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(h,{label:"姓名",prop:"name"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:s.form.name,"onUpdate:modelValue":l[4]||(l[4]=e=>s.form.name=e),readonly:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(h,{label:"性别",prop:"gender"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:s.form.gender,"onUpdate:modelValue":l[5]||(l[5]=e=>s.form.gender=e),readonly:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(h,{label:"0"===s.form.userType?"教师编号":"学生编号",prop:"teacherIDOrStudentID"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:s.form.teacherIDOrStudentID,"onUpdate:modelValue":l[6]||(l[6]=e=>s.form.teacherIDOrStudentID=e),modelModifiers:{number:!0},readonly:""},null,8,["modelValue"])])),_:1},8,["label"]),(0,t.Wm)(h,{label:"0"===s.form.userType?"教师职称":"年龄",prop:"titleOrAge"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:s.form.titleOrAge,"onUpdate:modelValue":l[7]||(l[7]=e=>s.form.titleOrAge=e),readonly:""},null,8,["modelValue"])])),_:1},8,["label"]),(0,t.Wm)(h,{label:"所属院系",prop:"department"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:s.form.department,"onUpdate:modelValue":l[8]||(l[8]=e=>s.form.department=e),readonly:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(h,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,{type:"primary",onClick:l[9]||(l[9]=e=>i.handUpdateForm())},{default:(0,t.w5)((()=>[(0,t.Uk)("修改")])),_:1})])),_:1})])),_:1},8,["model"]),(0,t.Wm)(b,{title:"修改",modelValue:s.dialogVisible,"onUpdate:modelValue":l[18]||(l[18]=e=>s.dialogVisible=e),width:"38%"},{footer:(0,t.w5)((()=>[(0,t._)("span",n,[(0,t.Wm)(c,{onClick:l[17]||(l[17]=e=>s.dialogVisible=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(c,{type:"primary",onClick:i.save},{default:(0,t.w5)((()=>[(0,t.Uk)("确定")])),_:1},8,["onClick"])])])),default:(0,t.w5)((()=>[(0,t.Wm)(V,{model:s.updateForm,"status-icon":"",class:"demo-form",rules:s.updateRules,ref:"updateForm"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{label:"昵称",prop:"nickName"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:s.updateForm.nickName,"onUpdate:modelValue":l[10]||(l[10]=e=>s.updateForm.nickName=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(h,{label:"邮箱",prop:"email"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:s.updateForm.email,"onUpdate:modelValue":l[11]||(l[11]=e=>s.updateForm.email=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(h,{label:"电话",prop:"phoneNumber"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:s.updateForm.phoneNumber,"onUpdate:modelValue":l[12]||(l[12]=e=>s.updateForm.phoneNumber=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(h,{label:"姓名",prop:"name"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:s.updateForm.name,"onUpdate:modelValue":l[13]||(l[13]=e=>s.updateForm.name=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(h,{label:"性别",prop:"gender"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:s.updateForm.gender,"onUpdate:modelValue":l[14]||(l[14]=e=>s.updateForm.gender=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(h,{label:"0"===s.updateForm.userType?"教师职称":"年龄",prop:"titleOrAge"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:s.updateForm.titleOrAge,"onUpdate:modelValue":l[15]||(l[15]=e=>s.updateForm.titleOrAge=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,t.Wm)(h,{label:"所属院系",prop:"department"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:s.updateForm.department,"onUpdate:modelValue":l[16]||(l[16]=e=>s.updateForm.department=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])])],64)}a(7658);var i=a(7068),p=a(3695),f=a(562),g={name:"personalinfo",data(){return{form:{teacherIDOrStudentID:"",titleOrAge:""},updateForm:{titleOrAge:""},dialogVisible:!1,updateRules:{nickName:{required:!0,trigger:"blur",message:"请输入昵称"},email:{required:!0,trigger:"blur",message:"请输入邮箱",pattern:/^([1-9])?([0-9])+@([a-zA-Z0-9]+).([a-zA-Z])+$/},phoneNumber:{required:!0,trigger:"blur",message:"请输入电话",pattern:/^([1-9])?([0-9]){11}$/},name:{required:!0,trigger:"blur",message:"请输入名称"},gender:{required:!0,trigger:"blur",message:"请输入性别（男或女）",pattern:/^男$|^女$/},titleOrAge:{required:!0,trigger:"blur",message:"请输入"},department:{required:!0,trigger:"blur",message:"请输入所属院系"}}}},mounted(){this.selectPersonalInfo()},methods:{selectPersonalInfo(){const e=(0,p.LP)();null!==e?(0,f.O)().then((e=>{200===e.code?(this.form=e.data,"0"===this.form.userType?(this.form.teacherIDOrStudentID=this.form.teacherID,this.form.titleOrAge=this.form.title):"1"===this.form.userType&&(this.form.teacherIDOrStudentID=this.form.studentID,this.form.titleOrAge=this.form.age)):401===e.code?((0,i.y)(e.code),(0,p.gy)(p.LP),this.$router.push("/"),this.$message({type:"error",message:"请重新登录"})):(0,i.y)(e.code)})).catch((()=>{})):((0,p.gy)(p.LP),this.$router.push("/"),this.$message({type:"error",message:"请登录"}))},handUpdateForm(){this.dialogVisible=!0,this.updateForm=this.form,void 0!==this.$refs["updateForm"]&&this.$refs["updateForm"].resetFields()},save(){this.$refs["updateForm"].validate((e=>{if(e){"0"===this.form.userType?this.updateForm.title=this.updateForm.titleOrAge:"1"===this.form.userType&&(this.updateForm.age=this.updateForm.titleOrAge);const e=this.updateForm;(0,f.x)(e).then((e=>{200===e.code?(this.$message({type:"success",message:"修改成功"}),this.selectPersonalInfo(),this.dialogVisible=!1):300===e.code?this.$message({type:"error",message:"修改失败"}):(0,i.y)(e.code)})).catch((()=>{}))}else this.$message({type:"error",message:"验证失败，请检查后重新提交"});return this.selectPersonalInfo(),!1}))}}},h=a(3744);const c=(0,h.Z)(g,[["render",s],["__scopeId","data-v-2be39eae"]]);var V=c}}]);
//# sourceMappingURL=473.53b12f73.js.map